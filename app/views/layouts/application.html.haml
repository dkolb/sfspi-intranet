!!!
%html{:lang => "en"}
  %head
    %meta{:content => "text/html; charset=UTF-8", 
      "http-equiv" => "Content-Type"}
    %title="SFSPI Management: #{content_for?(:title) ? yield(:title) : 'Home'}"
    = csrf_meta_tags
    = csp_meta_tag
    %meta{:content => "width=device-width, initial-scale=1, shrink-to-fit=no", 
      :name => "viewport"}
    = favicon_link_tag asset_pack_path('images/favicon.ico'), 
      rel: 'icon', type: 'image/x-icon'
    = javascript_pack_tag 'application', 'data-turbolinks-track': 'reload'
    = stylesheet_pack_tag 'application', media: 'all', 
      'data-turbolinks-track': 'reload'
  %body
    %nav.navbar.navbar-expand-lg.navbar-dark.dark.bg-dark
      %a.navbar-brand{:href => "/"} SFSPI Management System
      %button.navbar-toggler{"aria-controls" => "navbarSupportedContent", 
        "aria-expanded" => "false", 
        "aria-label" => "Toggle navigation", 
        "data-target" => "#navbarSupportedContent", 
        "data-toggle" => "collapse", :type => "button"}
        %span.navbar-toggler-icon
      #navbarSupportedContent.collapse.navbar-collapse
        %ul.navbar-nav.mr-auto
          = nav_link_to "Attendance Report", attendance_start_path, :inclusive
          = dropdown_nav "Events", "eventDropdown", /^\/events/,
            [ { name: 'Point Nun Report Form', path: new_event_path }, 
              { name: 'Look Up Old Point Nun Form', path: events_path } ]                                                          
          = nav_link_to "Members", members_path, :inclusive
          - if is_admin?
            = dropdown_nav 'Administration', 'adminDropdown', /^\/admin/, 
              [ { name: 'Manage User Roles and Record Links', 
              path: users_path } ]                                                           
        - if user_signed_in?
          .navbar-nav
            = dropdown_nav current_user.display_name, 'profileDropdown', 
              /^\/me/, 
              [ { name: 'Logout', path: logout_path },                            
                { name: 'Profile', 
                  path: edit_member_path(current_user.record_link) } ]
        - else
          %a.btn.btn-primary{:href => "/auth/microsoft_v2_auth", 
            :role => "button"}
            Login with Office365
    - flash.each do |key, value|
      %div{:class => "container #{flash_class(key)}"}
        - if value.is_a? Array
          %ul
            - value.each do |message|
              %li= message
        - else
          = value
    .container.main-container
      = yield
